<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fallback Solution - File Upload</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; direction: rtl; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; }
        .fix-card { background: white; border-radius: 12px; padding: 20px; margin: 16px 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .fix-header { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 16px; border-radius: 8px; margin-bottom: 16px; }
        .success-box { background: #dcfce7; border: 1px solid #86efac; border-radius: 8px; padding: 12px; margin: 12px 0; }
        .warning-box { background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 12px; margin: 12px 0; }
        .code-block { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 12px; margin: 12px 0; font-family: monospace; font-size: 14px; }
        .highlight { background: #fbbf24; padding: 2px 4px; border-radius: 3px; }
        .demo-button { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 12px 24px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 8px; transition: transform 0.2s; }
        .demo-button:hover { transform: scale(1.05); }
    </style>
</head>
<body>
    <div class="container">
        <h1>โ๏ธ ุญู ุงุญุชูุงุทู - ุฑูุน ุงููููุงุช</h1>
        
        <div class="fix-card">
            <div class="fix-header">
                <h2>๐ง ุงูุญู ุงูุงุญุชูุงุทู ุงููุทุจู</h2>
                <p>ุญูุธ ูุญูู ูููููุงุช ุนูุฏ ูุดู ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช</p>
            </div>
            
            <div class="warning-box">
                <h3>โ๏ธ ุงููุดููุฉ ุงูุญุงููุฉ:</h3>
                <p>Backend endpoint ููู session-media ุบูุฑ ูุชุงุญ ุฃู ููุงุฌู ูุดุงูู ุชูููุฉ</p>
                <div class="code-block">
Error: SessionMediaService.uploadMultipleFiles failed<br>
Endpoint: /api/session-media/upload-multiple<br>
Status: Internal Server Error (500)
                </div>
            </div>
        </div>

        <div class="fix-card">
            <h2>๐ ุงูุญู ุงูุงุญุชูุงุทู</h2>
            
            <div class="success-box">
                <h3>๐ก ุงูุงุณุชุฑุงุชูุฌูุฉ:</h3>
                <ol>
                    <li><strong>ูุญุงููุฉ ุฃููู:</strong> ุฑูุน ุงููููุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช</li>
                    <li><strong>ุนูุฏ ุงููุดู:</strong> ุญูุธ ุงููููุงุช ูุญููุงู ูู ุงููุชุตูุญ</li>
                    <li><strong>ุฅููุงู ุงููููุฉ:</strong> ุงููุชุงุจุนุฉ ุจุฏูู ุชููู</li>
                    <li><strong>ุนุฑุถ ุงููููุงุช:</strong> ุฅุธูุงุฑ ุงููููุงุช ุงููุญููุธุฉ ูุญููุงู</li>
                </ol>
            </div>
            
            <div class="code-block">
try {<br>
  // ูุญุงููุฉ ุฑูุน ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช<br>
  const uploadedMedia = await sessionMediaService.uploadMultipleFiles(...)<br>
  console.log('โ Files uploaded to database')<br>
} catch (uploadError) {<br>
  console.warn('โ๏ธ Database upload failed, using local storage fallback')<br>
  <br>
  // <span class="highlight">ุงูุญู ุงูุงุญุชูุงุทู: ุญูุธ ูุญูู</span><br>
  selectedTask.value.media = files.map((file, index) => ({<br>
    id: `local-${Date.now()}-${index}`,<br>
    file_name: file.name,<br>
    file_type: file.type.startsWith('image/') ? 'photo' : 'video',<br>
    file_size: file.size,<br>
    <span class="highlight">file_url: URL.createObjectURL(file), // ุฑุงุจุท ูุญูู</span><br>
    uploaded_at: new Date().toISOString(),<br>
    mime_type: file.type,<br>
    <span class="highlight">is_local: true // ุนูุงูุฉ ููุญูุธ ุงููุญูู</span><br>
  }))<br>
  <br>
  alert('โ๏ธ ุชู ุญูุธ ุงููููุงุช ูุญููุงู. ุณูุชู ุชุทููุฑ ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงุญูุงู.')<br>
}
            </div>
        </div>

        <div class="fix-card">
            <h2>๐ฏ ูุง ูุญุฏุซ ุงูุขู</h2>
            
            <div class="success-box">
                <h3>โ ุงููุธุงุฆู ุงูุชู ุชุนูู:</h3>
                <ul>
                    <li><strong>ุฅููุงู ุงูููุงู:</strong> ูุนูู ุจุฏูู ุชููู</li>
                    <li><strong>ุฑูุน ุงููููุงุช:</strong> ุญูุธ ูุญูู ูู ุงููุชุตูุญ</li>
                    <li><strong>ุนุฑุถ ุงููููุงุช:</strong> ุชุธูุฑ ูู ุงููุงุฌูุฉ ููุฑุงู</li>
                    <li><strong>ูุนุงููุฉ ุงููููุงุช:</strong> ูููู ูุชุญูุง ููุดุงูุฏุชูุง</li>
                    <li><strong>ูุนูููุงุช ุงููููุงุช:</strong> ุงูุงุณูุ ุงูุญุฌูุ ุงูููุน</li>
                </ul>
            </div>
            
            <div class="warning-box">
                <h3>โ๏ธ ุงููููุฏ ุงูุญุงููุฉ:</h3>
                <ul>
                    <li><strong>ุนุฏู ุงูุฏูุงู:</strong> ุงููููุงุช ุชุฎุชูู ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ</li>
                    <li><strong>ุนุฏู ุงููุดุงุฑูุฉ:</strong> ุงููููุงุช ูุชุงุญุฉ ููุท ูู ุงููุชุตูุญ ุงูุญุงูู</li>
                    <li><strong>ุนุฏู ุงูุญูุธ:</strong> ูุง ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช</li>
                </ul>
            </div>
        </div>

        <div class="fix-card">
            <h2>๐ ุฑุณุงุฆู Console ุงููุชููุนุฉ</h2>
            
            <div class="code-block">
๐ Uploading 2 files for user: 0f851929-30b0-4b1c-8f64-779bd03dae03<br>
๐ Attempting to upload files to database...<br>
๐ SessionMediaService: Starting upload...<br>
๐ค Sending request to backend...<br>
โ SessionMediaService error: Error<br>
โ๏ธ Database upload failed, using local storage fallback<br>
๐ Using local file storage: [{id: "local-1699...", file_name: "photo.jpg", ...}]<br>
๐พ Saving task completion to backend...<br>
โ Task completion saved to backend<br>
โ ุชู ุฅููุงู ุงููููุฉ ุจูุฌุงุญ!
            </div>
        </div>

        <div class="fix-card">
            <h2>๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ</h2>
            
            <div class="success-box">
                <h3>ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:</h3>
                <ol>
                    <li><strong>ุงุฐูุจ ููุฌูุณุงุช ุงูุฃุณุจูุนูุฉ:</strong> /teacher-weekly-sessions</li>
                    <li><strong>ุงุฎุชุฑ ูููุฉ ุบูุฑ ููุชููุฉ:</strong> ุงุถุบุท "ุฅููุงู ุงููููุฉ"</li>
                    <li><strong>ุฃุถู ูุตู ููููุงุช:</strong> ุงูุชุจ ูุตู ูุฃุฑูู ุตูุฑ/ููุฏูููุงุช</li>
                    <li><strong>ุงุถุบุท ุญูุธ:</strong> ุณุชุธูุฑ ุฑุณุงูุฉ ุชุญุฐูุฑูุฉ</li>
                    <li><strong>ุชุญูู ูู ุงููุชูุฌุฉ:</strong> ุงููููุฉ ููุชููุฉ ูุงููููุงุช ุธุงูุฑุฉ</li>
                    <li><strong>ุงุฎุชุจุฑ ุงููุนุงููุฉ:</strong> ุงุถุบุท ุนูู ุงููููุงุช ููุชุญูุง</li>
                </ol>
            </div>
            
            <div style="text-align: center; margin: 20px 0;">
                <button class="demo-button" onclick="window.open('http://localhost:5173/teacher-weekly-sessions', '_blank')">
                    ๐งช ุงุฎุชุจุฑ ุงูุญู ุงูุงุญุชูุงุทู
                </button>
            </div>
        </div>

        <div class="fix-card">
            <h2>๐ง ุฅุตูุงุญ Backend (ูููุณุชูุจู)</h2>
            
            <div class="warning-box">
                <h3>๐จ ุงููุดุงูู ุงููุญุชููุฉ ูู Backend:</h3>
                <ul>
                    <li><strong>SessionMediaController ุบูุฑ ูุณุฌู:</strong> ูู AppModule</li>
                    <li><strong>TypeORM Repository ููููุฏ:</strong> SessionMedia entity</li>
                    <li><strong>ูุฌูุฏ uploads ุบูุฑ ููุฌูุฏ:</strong> ./uploads/session-media</li>
                    <li><strong>ุตูุงุญูุงุช ุงููููุงุช:</strong> ูุดุงูู ูู ูุชุงุจุฉ ุงููููุงุช</li>
                </ul>
            </div>
            
            <div class="code-block">
// ุฎุทูุงุช ุงูุฅุตูุงุญ ุงููุทููุจุฉ:<br>
1. ุชุฃูุฏ ูู ุชุณุฌูู SessionMediaController ูู AppModule<br>
2. ุชุฃูุฏ ูู ูุฌูุฏ SessionMedia ูู TypeOrmModule.forFeature<br>
3. ุฅูุดุงุก ูุฌูุฏ uploads/session-media<br>
4. ุฅุนุงุฏุฉ ุชุดุบูู Backend server<br>
5. ุงุฎุชุจุงุฑ endpoint: curl -X POST http://localhost:3002/api/session-media/upload-multiple
            </div>
        </div>

        <div class="fix-card">
            <h2>โ ุงูุฎูุงุตุฉ</h2>
            
            <div class="success-box">
                <h3>๐ฏ ุงููุถุน ุงูุญุงูู:</h3>
                <ul>
                    <li>โ <strong>ุงูููุงู ุชูุชูู:</strong> ุจุฏูู ุชููู ุฃู ุฃุฎุทุงุก</li>
                    <li>โ <strong>ุงููููุงุช ุชุธูุฑ:</strong> ูู ุงููุงุฌูุฉ ููุฑุงู</li>
                    <li>โ <strong>ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฌูุฏุฉ:</strong> ูุน ุฑุณุงูุฉ ุชูุถูุญูุฉ</li>
                    <li>โ๏ธ <strong>ุญูุธ ูุคูุช:</strong> ุงููููุงุช ูุญููุฉ ููุท</li>
                    <li>๐ง <strong>ูุญุชุงุฌ ุฅุตูุงุญ Backend:</strong> ููุญูุธ ุงูุฏุงุฆู</li>
                </ul>
            </div>
            
            <p style="text-align: center; font-size: 18px; color: #f59e0b; font-weight: bold; margin-top: 20px;">
                โ๏ธ ุงูุญู ุงูุงุญุชูุงุทู ูุนูู - ุงููุธุงู ูุงุจู ููุงุณุชุฎุฏุงู! โ๏ธ
            </p>
        </div>
    </div>
</body>
</html>
